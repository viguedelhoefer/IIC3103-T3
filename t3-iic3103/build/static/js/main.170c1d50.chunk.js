(this["webpackJsonpt3-iic3103"]=this["webpackJsonpt3-iic3103"]||[]).push([[0],{109:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),r=n(32),a=n.n(r),s=(n(71),n(64)),o=n(28),l=n(6),j=n(8),d=(n(72),n(58)),b=n.n(d),O=n(132),h=n(144),u=n(133),x=n(145),g=n(134),p=n(135),f=n(7),m=n.n(f),v=n(131),y=n(139),C=n(143),S=n(142),A=n(137),w=n(140),I=n(141),F=n(138),T=n(136),k=n(2);var M=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(""),a=Object(j.a)(r,2),d=a[0],f=a[1],M=Object(c.useState)([]),E=Object(j.a)(M,2),H=E[0],L=E[1],N=Object(c.useState)([]),z=Object(j.a)(N,2),P=z[0],G=z[1],U=Object(c.useState)({}),V=Object(j.a)(U,2),B=V[0],D=V[1],J=Object(c.useState)(b()("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights",autoConnect:!1,transports:["websocket"]})),W=Object(j.a)(J,1)[0];Object(c.useEffect)((function(){return W.connect(),W.on("connect",(function(){console.log("connected"),W.emit("FLIGHTS")})),W.on("FLIGHTS",(function(e){console.log(e),G(e),e.forEach((function(e){D(Object(l.a)(Object(l.a)({},B),{},Object(o.a)({},e.code,[[0,0]])))}))})),W.on("POSITION",(function(e){D((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(o.a)({},e.code,[e.position]))}))})),W.on("CHAT",(function(e){console.log(e),e.date=new Date(e.date),e.date=e.date.toUTCString(),console.log(e.date),L((function(t){return[].concat(Object(s.a)(t),[e])}))})),function(){return W.disconnect(console.log("disconnected"))}}),[W]);var q=["blue","red","purple","green"],R=new(m.a.Icon.extend({options:{className:"asd",iconUrl:"https://i0.wp.com/p7.hiclipart.com/preview/352/395/627/flight-frequent-flyer-program-travel-airline-mango-vector-silver-flying-plane-plane.jpg",iconSize:[50,50]}}));return Object(k.jsxs)("div",{children:[Object(k.jsxs)(v.a,{container:!0,children:[Object(k.jsx)("h1",{children:"Rutas en vivo"}),Object(k.jsxs)("div",{style:{display:"flex",justifyContent:"center",position:"relative"},children:[Object(k.jsx)("div",{className:"Map-class",children:Object(k.jsxs)(O.a,{center:[-33.4513,-70.6653],zoom:5,scrollWheelZoom:!1,children:[Object(k.jsx)(h.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),P.map((function(e,t){return Object(k.jsxs)(c.Fragment,{children:[Object(k.jsx)(u.a,{color:q[t%q.length],positions:[e.origin,e.destination],dashArray:"5"}),Object(k.jsx)(x.a,{color:q[t%q.length],center:e.origin,radius:2e4,children:Object(k.jsxs)(g.a,{children:["Aeropuerto de origen: ",e.origin," ",Object(k.jsx)("br",{}),"Vuelo: ",e.code," ",Object(k.jsx)("br",{}),"Aerolinea: ",e.airline]})}),Object(k.jsx)(x.a,{color:q[t%q.length],center:e.destination,radius:2e4,children:Object(k.jsxs)(g.a,{children:["Aeropuerto de destino: ",e.destination," ",Object(k.jsx)("br",{}),"Vuelo: ",e.code," ",Object(k.jsx)("br",{}),"Aerolinea: ",e.airline]})})]})})),Object.entries(B).map((function(e){var t=Object(j.a)(e,2),n=t[0],c=t[1];return Object(k.jsx)(p.a,{position:c[0],marker_index:n,icon:R,children:Object(k.jsxs)(g.a,{children:["Codigo: ",n," ",Object(k.jsx)("br",{}),"Coordenadas Actuales: ",c[0][0],",",c[0][1]]})})}))]})}),Object(k.jsxs)(T.a,{children:[Object(k.jsx)("h3",{children:"Chat"}),Object(k.jsx)("div",{style:{height:"350px",overflow:"scroll",width:"500px"},children:H.map((function(e){return Object(k.jsxs)("div",{style:{borderColor:"black",borderStyle:"solid"},children:[Object(k.jsxs)("p",{children:["Fecha: ",e.date]}),Object(k.jsxs)("p",{children:["Nombre: ",e.name]}),Object(k.jsxs)("p",{children:["Mensaje: ",e.message]})]})}))}),Object(k.jsxs)("div",{style:{height:"100px"},children:[Object(k.jsx)("input",{type:"text",placeholder:"Username...",value:n,onChange:function(e){return i(e.target.value)}}),Object(k.jsx)("input",{type:"text",placeholder:"Message...",value:d,onChange:function(e){return f(e.target.value)}}),Object(k.jsx)("button",{onClick:function(){W.emit("CHAT",{name:n,message:d})},children:"Enviar Mensaje"})]})]})]}),Object(k.jsxs)("div",{style:{display:"flex",justifyContent:"center",position:"relative"},children:[Object(k.jsx)("h3",{style:{textAlign:"center"},children:"Informacion de los vuelos"}),Object(k.jsx)("button",{onClick:function(){W.emit("FLIGHTS")},children:"Actualizar Informacion"})]})]}),Object(k.jsx)(A.a,{component:F.a,children:Object(k.jsxs)(y.a,{style:{minWidth:450},"aria-label":"simple table",children:[Object(k.jsx)(w.a,{children:Object(k.jsxs)(I.a,{children:[Object(k.jsx)(S.a,{align:"center",children:"Aerolinea"}),Object(k.jsx)(S.a,{align:"center",children:"Codigo\xa0Vuelo"}),Object(k.jsx)(S.a,{align:"center",children:"Avion"}),Object(k.jsx)(S.a,{align:"center",children:"Asientos"}),Object(k.jsx)(S.a,{align:"center",children:"Coordenadas\xa0Inicio"}),Object(k.jsx)(S.a,{align:"center",children:"Coordenadas\xa0Fin"}),Object(k.jsx)(S.a,{align:"center",children:"Pasajeros"})]})}),Object(k.jsx)(C.a,{children:P.map((function(e){return Object(k.jsxs)(I.a,{children:[Object(k.jsx)(S.a,{align:"center",children:e.airline}),Object(k.jsx)(S.a,{align:"center",children:e.code}),Object(k.jsx)(S.a,{align:"center",children:e.plane}),Object(k.jsx)(S.a,{align:"center",children:e.seats}),Object(k.jsxs)(S.a,{align:"center",children:[e.origin[0],",",e.origin[1]]}),Object(k.jsxs)(S.a,{align:"center",children:[e.destination[0],",",e.destination[1]]}),Object(k.jsx)(S.a,{align:"center",children:e.passengers.map((function(e){return Object(k.jsxs)("p",{children:["Nombre: ",e.name," ",Object(k.jsx)("br",{})," Edad: ",e.age]})}))})]})}))})]})})]})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,146)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),r(e),a(e)}))};a.a.render(Object(k.jsx)(i.a.StrictMode,{children:Object(k.jsx)(M,{})}),document.getElementById("root")),E()},71:function(e,t,n){},72:function(e,t,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.170c1d50.chunk.js.map